{"version":3,"sources":["scripts/main.js"],"names":["tHead","document","querySelector","tBody","options","body","insertAdjacentHTML","form","lastTHeadClick","compare","th","a","b","children","textContent","replace","localeCompare","addEventListener","e","rows","indexOf","target","sort","forEach","row","append","valid","formData","some","el","pushNotification","window","pageYOffset","get","length","posTop","posRight","title","description","type","windowNotification","createElement","last","className","style","top","right","lastTimeout","lastWN","remove","clearTimeout","setTimeout","currentTarget","classList","closest","add","preventDefault","FormData","f","map","index","toLocaleString","join","reset","td","indexTd","parentElement","defValue","innerText","innerHTML","input","firstChild","value","focus","evKey","key","blur","ev"],"mappings":"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","file":"main.364a4333.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst tHead = document.querySelector('thead');\nconst tBody = document.querySelector('tbody');\n\nconst options = `\n  <option value=\"Tokyo\">\n    Tokyo\n  </option>\n\n  <option value=\"Singapore\">\n    Singapore\n  </option>\n\n  <option value=\"London\">\n    London\n  </option>\n\n  <option value=\"New York\">\n    New York\n  </option>\n\n  <option value=\"Edinburgh\">\n    Edinburgh\n  </option>\n\n  <option value=\"San Francisco\">\n    San Francisco\n  </option>`;\n\ndocument.body.insertAdjacentHTML('beforeend', `\n  <form class=\"new-employee-form\" action=\"/\" method=\"post\">\n    <label>\n      Name:\n      <input name=\"name\" type=\"text\" data-qa=\"name\" >\n    </label>\n\n    <label>\n      Position:\n      <input name=\"position\" type=\"text\" data-qa=\"position\">\n    </label>\n\n    <label>\n      Office:\n\n      <select name=\"office\" data-qa=\"office\">\n        ${options}\n      </select>\n    </label>\n\n    <label>\n      Age:\n\n      <input name=\"age\" type=\"number\" data-qa=\"age\">\n    </label>\n\n    <label>\n      Salary:\n\n      <input name=\"salary\" type=\"number\" data-qa=\"salary\">\n    </label>\n\n    <button type=\"submit\">\n      Save to table\n    </button>\n  </form>`);\n\nconst form = document.querySelector('.new-employee-form');\nlet lastTHeadClick = -1;\n\nfunction compare(th, a, b) {\n  return th > 2\n    ? a.children[th].textContent.replace(/\\$|,/g, '')\n      - b.children[th].textContent.replace(/\\$|,/g, '')\n    : a.children[th].textContent.localeCompare(b.children[th].textContent);\n}\n\ntHead.addEventListener('click', e => {\n  const th = [...tHead.rows[0].children].indexOf(e.target);\n\n  [...tBody.rows].sort((a, b) => lastTHeadClick !== th\n    ? compare(th, a, b)\n    : compare(th, b, a))\n    .forEach(row => tBody.append(row));\n\n  lastTHeadClick = lastTHeadClick !== th ? th : -1;\n});\n\nconst valid = [\n  (formData) => [...formData].some(el => el[1] === '')\n    ? pushNotification(20 + window.pageYOffset | 0, 20,\n      'ERROR', 'All fields are required! Please fill in all fields', 'error')\n    : false,\n  (formData) => formData.get('name').length < 4\n    ? pushNotification(20 + window.pageYOffset | 0, 20,\n      'ERROR', 'The \"name\" field must have at least 4 characters', 'error')\n    : false,\n  (formData) => (formData.get('age') < 18 || formData.get('age') > 90)\n    ? pushNotification(20 + window.pageYOffset | 0, 20,\n      'ERROR', `The value of the \"age\" field\n      must be in the range from 18 to 90`, 'error')\n    : false,\n];\n\ntBody.addEventListener('click', e => {\n  [...e.currentTarget.children].forEach(el => el.classList.remove('active'));\n  e.target.closest('tr').classList.add('active');\n});\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const formData = new FormData(e.target);\n\n  if (!valid.some(f => f(formData))) {\n    tBody.insertAdjacentHTML('beforeend', `\n    <tr>${[...formData].map((el, index) =>\n    `<td>${index < 4 ? el[1] : '$' + (+el[1]).toLocaleString('en-US')}</td>`)\n    .join('')}</tr>`);\n\n    pushNotification(20 + window.pageYOffset | 0, 20,\n      'SUCCESS', 'Record successfully added to table', 'success');\n    e.target.reset();\n  }\n});\n\ntBody.addEventListener('dblclick', e => {\n  const td = e.target;\n  const indexTd = [...td.parentElement.children].indexOf(td);\n  const defValue = td.innerText;\n\n  td.innerHTML = indexTd !== 2\n    ? `<input class=\"cell-input\" type=\"${indexTd < 3 ? 'text' : 'number'}\">`\n    : `<select class=\"cell-input\" value=\"New York\">${options}</select>`;\n\n  const input = td.firstChild;\n\n  input.value = indexTd !== 4 ? defValue : defValue.replace(/\\$|,/g, '');\n  input.focus();\n\n  input.addEventListener('keypress', evKey => {\n    if (evKey.key === 'Enter') {\n      input.blur();\n    }\n  });\n\n  input.addEventListener('blur', ev => {\n    let value = ev.target.value;\n\n    if ((indexTd === 0 && value.length < 4)\n      || (indexTd === 1 && value.length < 1)\n      || (indexTd === 3 && (value < 18 || value > 90))) {\n      value = defValue;\n    } else if (indexTd === 4) {\n      value = '$' + (+value).toLocaleString('en-US');\n    }\n\n    td.innerHTML = value;\n    input.remove();\n  });\n});\n\nfunction pushNotification(posTop, posRight, title, description, type) {\n  const windowNotification = document.createElement('section');\n\n  pushNotification.last = windowNotification;\n  windowNotification.className = `notification data-qa='notification' ${type}`;\n  windowNotification.style.top = `${posTop}px`;\n  windowNotification.style.right = `${posRight}px`;\n\n  windowNotification.insertAdjacentHTML('afterbegin', `\n    <h2 class=\"title\">${title}</h2>\n    <p>${description}</p>\n  `);\n\n  if (pushNotification.lastTimeout) {\n    pushNotification.lastWN.remove();\n    clearTimeout(pushNotification.lastTimeout);\n  }\n\n  document.body.append(windowNotification);\n\n  pushNotification.lastTimeout = setTimeout(\n    () => windowNotification.remove(), 2000);\n  pushNotification.lastWN = windowNotification;\n\n  return type === 'error';\n};\n"]}